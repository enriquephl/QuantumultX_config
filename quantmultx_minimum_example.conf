[general]
# IP_API
geo_location_checker=http://ip-api.com/json/?lang=zh-CN&fields=16920091, https://raw.githubusercontent.com/phlinhng/QuantumultX/master/Scripts/IP_API.js

# èµ„æºè§£æå™¨
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js

# æ’é™¤è·¯çº¿
excluded_routes = 239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32

# UDP Allow Ports
udp_whitelist = 53,123,81-442,444-5331,5334-65535

# DNS æ’é™¤åˆ—è¡¨
dns_exclusion_list = *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com, *.npln.srv.nintendo.net

[dns]
prefer-doh3
no-system
;no-ipv6
doq-server = quic://223.5.5.5, quic://223.6.6.6
doh-server = https://doh.pub/dns-query, https://doh.360.cn/dns-query
doh-server = /*.icloud-content.com/https://doh.pub/dns-query
doh-server = /*.icloud-content.com/https://doh.360.cn/dns-query
doq-server = /*.aliapp.org/quic://223.5.5.5
doq-server = /*.aliapp.org/quic://223.6.6.6
doq-server = /*.alipay.com/quic://223.5.5.5
doq-server = /*.alipay.com/quic://223.6.6.6
doq-server = /*.taobao.com/quic://223.5.5.5
doq-server = /*.taobao.com/quic://223.6.6.6
doq-server = /*.alipayobjects.com/quic://223.5.5.5
doq-server = /*.alipayobjects.com/quic://223.6.6.6
doq-server = /*.alibabachengdun.com/quic://223.5.5.5
doq-server = /*.alibabachengdun.com/quic://223.6.6.6
server = /*.alicdn.com/system
server = /xp.apple.com/system
server = /captive.apple.com/system
server = /netcts.cdn-apple.com/system
server = /*.hdslb.com/system
server = /*.bilivideo.com/system
server = /*.wechat.com/system
server = /*.weixin.com/system
server = /*.weixin.qq.com/system
server = /*.weixin.qq.com.cn/system
server = /*.qpic.cn/system
server = /*.qlogo.cn/system
server = /*.xhscdn.com/system
server = 119.29.29.29
server = 8.8.8.8
server = /router.asus.com/system
server = /asusrouter.com/system
server = /*.asusrouter.com/system
alias = /iosapps.itunes.apple.com/iosapps.itunes.apple.com.download.ks-cdn.com
alias = /updates.cdn-apple.com/updates.cdn-apple.com.download.ks-cdn.com
alias = /metrics-picture.d.meituan.net/metrics-picture.dreport.meituan.net
alias = /maplocatesdksnapshot.d.meituan.net/maplocatesdksnapshot.dreport.meituan.net

[policy]
# è¯·æ ¹æ®è‡ªèº«æœºåœºæƒ…å†µè°ƒæ•´ regex è§„åˆ™
static = EU, server-tag-regex=ğŸ‡¦ğŸ‡¹|ğŸ‡§ğŸ‡ª|ğŸ‡§ğŸ‡¬|ğŸ‡­ğŸ‡·|ğŸ‡¨ğŸ‡¿|ğŸ‡©ğŸ‡°|ğŸ‡ªğŸ‡ª|ğŸ‡«ğŸ‡®|ğŸ‡«ğŸ‡·|ğŸ‡©ğŸ‡ª|ğŸ‡¬ğŸ‡·|ğŸ‡­ğŸ‡º|ğŸ‡®ğŸ‡¸|ğŸ‡®ğŸ‡ª|ğŸ‡®ğŸ‡¹|ğŸ‡±ğŸ‡»|ğŸ‡±ğŸ‡¹|ğŸ‡±ğŸ‡º|ğŸ‡²ğŸ‡¹|ğŸ‡²ğŸ‡©|ğŸ‡²ğŸ‡¨|ğŸ‡³ğŸ‡±|ğŸ‡²ğŸ‡°|ğŸ‡³ğŸ‡´|ğŸ‡µğŸ‡±|ğŸ‡µğŸ‡¹|ğŸ‡·ğŸ‡´|ğŸ‡·ğŸ‡¸|ğŸ‡¸ğŸ‡°|ğŸ‡¸ğŸ‡®|ğŸ‡ªğŸ‡¸|ğŸ‡¸ğŸ‡ª|ğŸ‡¨ğŸ‡­, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/European_Union.png
static = HK, server-tag-regex=ğŸ‡­ğŸ‡°|ğŸ‡²ğŸ‡´, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Hong_Kong.png
static = JP, server-tag-regex=ğŸ‡¯ğŸ‡µ, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Japan.png
static = SG, server-tag-regex=ğŸ‡¸ğŸ‡¬|ğŸ‡²ğŸ‡¾|ğŸ‡»ğŸ‡³, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Singapore.png
static = TW, server-tag-regex=ğŸ‡¹ğŸ‡¼, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Taiwan.png
;static = TW_ISP, hinet01, proxy, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TW.png
static = US, server-tag-regex=ğŸ‡ºğŸ‡¸|ğŸ‡¨ğŸ‡¦|ğŸ‡¦ğŸ‡º, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/United_States.png
;static=Bilibili, direct, HK, TW, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png
;static=Line, HK, JP, SG, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Line.png
;static=WeChat, direct, HK, SG, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/WeChat.png
static=YouTube, proxy, EU, HK, JP, SG, TW, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
;static=YouTubeCDN, YouTube, HK, JP, SG, TW, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube_Letter.png
;static=ï£¿iCloud, direct, HK, JP, SG, TW, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/iCloud.png
;static=ï£¿iCloudContent, direct, ï£¿iCloud, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/iCloud.png
;static=ï£¿LocationServices, direct, proxy, EU, HK, JP, SG, TW, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Find_My.png
;static=ï£¿News, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_News.png

[server_remote]
; æ·»åŠ ä½ çš„æœºåœºè®¢é˜…é“¾æ¥

[filter_remote]
; ä¿®æ­£è¡¥ä¸
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/Whitelist.snippet, tag=Whitelist, enabled=true
; æ‹¦åŠ«éš±ç§è¿½è¸ªå™¨å’Œ PCDN tracker
; NoMalwares å’Œ NoMalwaresPlus æ‹©ä¸€å¯ç”¨
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/NoMalwares.conf, tag=NoMalwares, force-policy=reject, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/NoMalwaresPlus.list, tag=NoMalwaresPlus, force-policy=reject, enabled=true
https://raw.githubusercontent.com/Elysian-Realme/FuGfConfig/main/ConfigFile/DomainSet/FuckRogueSoftware/domain.list#type=domain-set, tag=Privacy, force-policy=reject, opt-parser=true, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/reject-no-drop.conf, tag=RejectNoDrop, force-policy=reject, opt-parser=true, enabled=true
; Apple åŸŸåå¤„ç†
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/AppleExtra.snippet, tag=AppleExtra, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/AppleIntelligence.conf#via=0, tag=AppleIntelligence, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/domainset/icloud_private_relay.conf#type=domain-set, tag=iCloudPrivateRelay, force-policy=proxy, opt-parser=true, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/apple_cn.conf, tag=AppleCN, force-policy=direct, opt-parser=true, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/apple_cdn.conf, tag=AppleCDN, force-policy=direct, opt-parser=true, enabled=true
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/AppleNoChinaCDN.list, tag=AppleNoChinaCDN, force-policy=proxy, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/apple_services.conf, tag=AppleServices, force-policy=direct, opt-parser=true, enabled=true
; å›½å†…ç›´è¿éƒ¨åˆ†
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/EmailDirect.snippet, tag=EmailDirect, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/SteamCN/SteamCN.list, tag=SteamCN, force-policy=direct, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/microsoft_cdn.conf, tag=MicrosoftCDN, force-policy=direct, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/Elysian-Realme/FuGfConfig/main/ConfigFile/QuantumultX/MicrosoftRules.conf, tag=MicrosoftDirect, force-policy=direct, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OneDrive/OneDrive.list, tag=OneDrive, force-policy=direct, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/Bilibili.snippet, tag=Bilibili, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/Xiaohongshu.snippet, tag=Xiaohongshu, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/Wechat.snippet, tag=Wechat, enabled=true
https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/domestic.conf, tag=Domestic, force-policy=direct, opt-parser=true, enabled=true
; Telegram
https://raw.githubusercontent.com/enriquephl/telegram_ips/main/TelegramUS.list, tag=TelegramUS, force-policy=US, enabled=true
https://raw.githubusercontent.com/enriquephl/telegram_ips/main/TelegramSG.list, tag=TelegramSG, force-policy=SG, enabled=true
https://raw.githubusercontent.com/enriquephl/telegram_ips/main/TelegramNL.list, tag=TelegramNL, force-policy=EU, enabled=true
; Web3
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/ClashRuleSet/Clash/Web3.list#via=0, tag=Web3, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
; å®¶å®½ + ä»£ç†é“¾åˆ†æµ AI å’Œæµåª’ä½“
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/UnbanAirport.conf#via=0, tag=UnbanAirport, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/ai.conf#via=0, tag=AIPlatforms, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/InstagramUnblock.conf#via=0, tag=InstagramUnblock, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
; æµåª’ä½“ CDN
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/MediaCDNs.list, tag=MediaCDNs, force-policy=proxy, enabled=true
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/snippets/MediaCDNExtra.snippet, tag=MediaCDNExtra, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=Spotify, force-policy=proxy, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/YouTubeCDNs.conf, tag=YoutubeCDNs, force-policy=YouTubeCDN, enabled=true
https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/YouTube.list, tag=YouTube, force-policy=YouTube, enabled=true
; for GDPR purposes
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/GoogleAPIs.conf, tag=GoogleAPIs, force-policy=EU, enabled=true
;https://raw.githubusercontent.com/enriquephl/QuantumultX_config/main/filters/MetaAPIs.conf, tag=MetaAPIs, force-policy=EU, enabled=true
; Nintendo
;https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Nintendo/Nintendo.list, tag=Nintendo, force-policy=HK, enabled=true
; æµåª’ä½“
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/stream_hk.conf, tag=StreamHK, force-policy=HK, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/stream_jp.conf, tag=StreamJP, force-policy=JP, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/stream_tw.conf, tag=StreamTW, force-policy=TW, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/stream_us.conf, tag=StreamUS, force-policy=US, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/SukkaLab/ruleset.skk.moe/master/List/non_ip/stream.conf#via=0, tag=ForeignMedia, force-policy=TW_ISP, update-interval=172800, opt-parser=true, enabled=true
; ç›´è¿å…œåº•
FILTER_LAN, tag=LAN, force-policy=direct, enabled=true
FILTER_REGION, tag=CN, force-policy=direct, enabled=true

[rewrite_remote]
;https://raw.githubusercontent.com/fmz200/wool_scripts/main/QuantumultX/rewrite/rewrite.snippet, tag=NoAdvertising, update-interval=172800, opt-parser=false, enabled=true
;https://github.com/NSRingo/LocationService/releases/latest/download/iRingo.LocationService.snippet, tag=iRingoLocation, update-interval=172800, opt-parser=false, enabled=true
;https://github.com/NSRingo/Siri/releases/latest/download/iRingo.Siri.snippet, tag=iRingoSiri, update-interval=172800, opt-parser=false, enabled=true
;https://github.com/NSRingo/News/releases/latest/download/iRingo.News.snippet, tag=iRingoNews, update-interval=172800, opt-parser=false, enabled=true
;https://github.com/NSRingo/TV/releases/latest/download/iRingo.TV.snippet, tag=iRingoTV, update-interval=172800, opt-parser=false, enabled=true
;https://github.com/chavyleung/scripts/raw/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJs, update-interval=172800, opt-parser=false, enabled=true

[server_local]

[filter_local]
; é¿å…ç‰¹æ®Šæ—¶æœŸ dns åˆ†æµå¤±è¯¯
host-suffix, github.com, proxy
host-suffix, githubusercontent.com, proxy
host, www.google.com, proxy
final, proxy

[rewrite_local]

[task_local]

[http_backend]

[mitm]
